-- Crear la tabla sucursal
CREATE TABLE sucursal (
  id NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
  nombre VARCHAR2(225)
);

-- Crear la tabla empleado
CREATE TABLE empleado (
  id NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
  nombre VARCHAR2(150),
  email VARCHAR2(100),
  password VARCHAR2(100),
  id_sucursal NUMBER,
  CONSTRAINT fk_empleado_sucursal
    FOREIGN KEY (id_sucursal)
    REFERENCES sucursal(id)
);

-- Crear la tabla producto
CREATE TABLE producto (
  id NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
  nombre VARCHAR2(50),
  descripcion VARCHAR2(225)
);

-- Crear la tabla materia_prima
CREATE TABLE materia_prima (
  id NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
  nombre VARCHAR2(100),
  precio NUMBER
);

-- Crear la tabla producto_materia
CREATE TABLE producto_materia (
  id_producto NUMBER,
  id_materia_prima NUMBER,
  cantidad NUMBER,
  CONSTRAINT fk_product_materia_producto
    FOREIGN KEY (id_producto)
    REFERENCES producto(id),
  CONSTRAINT fk_product_materia_materia_prima
    FOREIGN KEY (id_materia_prima)
    REFERENCES materia_prima(id)
);

-- Crear la tabla inventario
CREATE TABLE inventario (
  id_materia_prima NUMBER PRIMARY KEY,
  stock NUMBER,
  CONSTRAINT fk_inventario_materia_prima
    FOREIGN KEY (id_materia_prima)
    REFERENCES materia_prima(id)
);

-- Crear la tabla pedido
CREATE TABLE pedido (
  id NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
  id_sucursal NUMBER,
  id_empleado NUMBER,
  CONSTRAINT fk_pedido_sucursal
    FOREIGN KEY (id_sucursal)
    REFERENCES sucursal(id),
  CONSTRAINT fk_pedido_empleado
    FOREIGN KEY (id_empleado)
    REFERENCES empleado(id)
);

-- Crear la tabla producto_pedido
CREATE TABLE producto_pedido (
  id_pedido NUMBER,
  id_producto NUMBER, 
  cantidad NUMBER,
  CONSTRAINT fk_producto_pedido_pedido
    FOREIGN KEY (id_pedido)
    REFERENCES pedido(id),
  CONSTRAINT fk_producto_pedido_producto
    FOREIGN KEY (id_producto)
    REFERENCES producto(id)
);
